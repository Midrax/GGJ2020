<!DOCTYPE HTML>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta content='width=device-width, initial-scale=1, maximum-scale=1 user-scalable=0' name='viewport'>
    <title>AirConsole Controller</title>
    <link href='https://fonts.googleapis.com/css?family=Play:400,700' rel='stylesheet' type='text/css'>
    <!-- AirConsole-Controls -->
    <link rel="stylesheet" type="text/css" href="airconsole-controls/button/button.css">
    <link rel="stylesheet" type="text/css" href="airconsole-controls/dpad/dpad.css">
    <link rel="stylesheet" type="text/css" href="airconsole-controls/joystick/joystick.css">
    <!-- Styles -->
    <link rel="stylesheet" type="text/css" href="controller/styles/styles.css">
    <link rel="stylesheet" type="text/css" href="controller/styles/controls.css">

    <style type="text/css">

        /* You need to explicitly position your joystick */
        #joystick_left {
            position: absolute;
            width: 45%;
            height: 90%;
            top: 5%;
            left: 5%;
        }
    </style>
</head>
<body>

    <div id="controller-container">
        <div id="view-0" class="view" style="display: flex;">
            <div id="view-0" class="view" style="display: flex;">
                <div id="view-0-section-0" class="section " style="height: 100%;">
                    <div id="joystick_left" class="joystick">
                        <div class="joystick-relative">
                            <div class="joystick-relative-stick"></div>
                        </div>
                    </div>
                </div>
                <div id="view-0-section-1" class="section " style="height: 100%;">
                    <div id="view-0-section-1-element-0" class="button-300-150 button-element element">
                        <div class="button-text">Action1</div>
                    </div>
                    <div id="view-0-section-1-element-1" class="button-300-150 button-element element">
                        <div class="button-text">Action2</div>
                    </div>
                </div>
            </div>


            <script type="text/javascript">
                var ctrl_data = '{"orientation":"landscape","selected_view_id":"view-0","views":[{"id":"view-0","sections":[{"id":"view-0-section-0","elements":[],"classes":[]},{"id":"view-0-section-1","elements":[{"id":"view-0-section-1-element-0","key":"button","name":"Button","tmpl":"button","constructor_fn":"ButtonElement","options":{"constructor_args":{},"attr_id":"view-0-section-1-element-0","css_classes":"button-300-150","view_action":{"target":null,"view_id":null},"label":"Action1","send_onrelease":false,"message_data":[{"key":"action","value":"action1"}]}},{"id":"view-0-section-1-element-1","key":"button","name":"Button","tmpl":"button","constructor_fn":"ButtonElement","options":{"constructor_args":{},"attr_id":"view-0-section-1-element-1","css_classes":"button-300-150","view_action":{"target":null,"view_id":null},"label":"Action2","send_onrelease":false,"message_data":[{"key":"action","value":"action2"}]}}],"classes":[]}]}]}';
            </script>


            <script type="text/javascript">
                var airconsole = new AirConsole();
                var rateLimiter = new RateLimiter(airconsole);

                var joystick_left = new Joystick("joystick_left", {
                    "touchstart": function () {
                        rateLimiter.message(AirConsole.SCREEN, {
                            "joystick_left": {
                                touch: true
                            }
                        });
                    },
                    "touchmove": function (position) {
                        rateLimiter.message(AirConsole.SCREEN, {
                            "joystick_left": {
                                position: position
                            }
                        });
                    },
                    "touchend": function (had_direction) {
                        rateLimiter.message(AirConsole.SCREEN, {
                            "joystick_left": {
                                touch: false
                            }
                        });
                    },
                    absolute_start: false
                });

            </script>

        </div>

        <!-- 3rd Party Libs -->
        <script src="//ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
        <script type="text/javascript" src="controller/libs/handlebars-v4.0.5.js"></script>
        <!-- AIRCONSOLE -->
        <script type="text/javascript" src="https://www.airconsole.com/api/airconsole-latest.js"></script>
        <script type="text/javascript" src="controller/libs/airconsole_view_manager.js"></script>
        <!-- AIRCONSOLE CONTROLS -->
        <script type="text/javascript" src="airconsole-controls/button/button.js"></script>
        <script type="text/javascript" src="airconsole-controls/dpad/dpad.js"></script>
        <script type="text/javascript" src="airconsole-controls/swipe-analog/swipe-analog.js"></script>
        <script type="text/javascript" src="airconsole-controls/swipe-digital/swipe-digital.js"></script>
        <script type="text/javascript" src="airconsole-controls/swipe-digital/swipe-digital.js"></script>

        <script type="text/javascript" src="airconsole-controls/joystick/joystick.js"></script>
        <script type="text/javascript" src="airconsole-controls/rate-limiter/rate-limiter.js"></script>

        <!-- GENERATOR -->
        <script type="text/javascript" src="controller/js/controller_generator.js"></script>
        <script type="text/javascript" src="controller/js/main.js"></script>
</body>
</html>
